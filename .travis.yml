language: node_js
node_js:
- '8'
install:
- npm install
cache:
  directories:
  - "node_modules"
sudo: required
services:
- docker
notifications:
  on_success: always
  on_failure: always
  email:
  - daniel.tirzuman@gohelpfund.com
branches:
  only:
  - develop
env:
  global:
  - secure: qG8PgglmPG5inC1n3WzlOEu3Bl9SLlJ9UzY5v1ePKKNA8cNb5+UmVMTJghJJI/WCexYDsmTDa5U816jD0elFusTdqa9Osnz+i+cUA4/j0GWjT5RvHDvxTy+CKyqG86+2uELJovuCAXA22gFfacuh4r/3j+fdQuZUeAVSOtKQI+X322H9YraKDC/XeV510b3RRRho+rZaQIReaNH4DM6d+4bMtoGhv8a0L5AzKmxpHI8wDoNxspEUiiAdhQz1Afi3iXMC+83ofQnJDFe/yL++UvUv1+8oCsAbnVgYtknloSln+jIIGxBBXlJrRlD4lFYal9w9IypF5yf8GIqWbNxDSH5SrbgZms6tty8H9ubGvNvyUPKrDSenh7AlF9s8JNj4bXf5CExdRuYF8c7DdS0zbfB5RS3a6d5lWZ1HHUZN9s2a6NjCW62m0qlcG3AwH7A2AZc4sT7izWD2bS3xjKDHfRC+OR1rrkCzCL0zy/aOYaDvIEvuJK/EK5qlmBXBzphWLDNPbb5KGPrQniOPbBfcdwfOSM15i9TxyuKLn55UKOu9rqkn4y4EqeQedoy1+MuAObxVBuQQr3BmYX4RfBYc/OEPXO8Mi9Dsyx4tErMkmmAMi2ITbSozdouX9Ymz8yNkNb5coNv5PhXWzq8+ds+O7jULTfqGf/4Rtc8wpP3CT2E=
  - secure: iPuxmjUbnPhQpgbtSQw+wB7bhptQuiWTADrDNZXOfm5TvwfhN2y/lOouV8k6b1/z2t1jj/JMpzbG/QXBN05x7E9plDBV+esKS21qO5yZlGvhslOKgCn+HcWQMUzGnLl8gN5Gg0/s1tO5AbXsyu4I8y5iXELtGlmu6vIzf4ImQWv43/qPzAsR8Sb+U7n3N/gcYKnYSBcJrO7bRNHGJPoiJmPfOkhzgKp6MQX2wZvLWnYdVNmGbf3q9bTfFD23AgnT+gIiGWjIqOgQoXlR9/wMuYV07rfBlOlsfS6jU1xEOXEYnp03Amr0wL1ZE88lr/lEINuBX9T1mxurgy0Cp+bpaqW28jMQwA22nL7q99//4L7wLotp4u9O98MyKKKmnXKFbs9z5jZuUl5xE1t4m+GmUL8j38jxteK7i5A3D+MabYkH96Z40i+UGmef6y2yOdS8s0BTzltXZpcnk7nGxY5ujVcbej4wYE997VZ4vkCqW+F5EimKRmVT8wEibz6d0m2p5IpFDi3GKROSdH5G9mXVTdb+TrOcLUk6RsMdOEeuRwD3+ljl/y20PUgm3jXBrxtWtup4nQKCMZ7Kl0C6pVNwVTLOPfgvrsYPThczUxaPOou7USeHCDLHILtHUHPpSy+NayOdq3f6zCYEPc7XXx4wPICljYyhGFQoraX+noNwD7A=
  - secure: qMAnZO9nm7qpp6B3a99cWd3K/FjO9h0APqafx90d1b+lXZme4e1C9VDDaUAJ9QSH3kYPe8eunbUBdevbO8mo/uOegY9VfNwZd9aHUwPRGxrP2CDf0X0kxklrCTym6ZvlNgN6loki6HwqqHI4u5lmj/NQ/5g3EK/LJ7RvLnxwDJS8UeFA5DdxUC3qHutNGsl5Lum93GwmSQ9NPg5un7CW11m1f8C+SI6IZhm6oo1FN4eGZxeSpTLcTC0I/xHw5zEa05tkMuOzX2H2oyK3mw0g2GCPMMv/5mDr9tP8/QXgBttPGCcvXq6/BCc5e9+MzqUXBtsgf4ZPZJ52raYdW4pVAM+NA0lZu6rHbUP+j2m/xty5Fmqf1p9XJJlS+Vq62dXGBz7AI3czl6KgMouIqewtqnszJPb8rygQMGMncgin0rdd9GyxCnDsNrnIaG0F/aznX+cVPNRXJAeWp8LZKVt3hlwTCJIIvA8yG+S0MMV7AkuExOEpTg2iegXGMHdCifsbJdz182dZsoZy2MNIATt5CY7MzFC+GBg2R2fe0CBwih4L8/BcGW/yz6beZHWpUYegAY6YJ9TDCL22WeGL3rUvycoBb7HS8LOEwkdGsRTjhXsZnWXMo1olr6RRDuXSKHMLdZ1yh9sE9s6ecx7MWyTsbiYxTrmcMfKg98MiGEMSCNM=
  - secure: s+f03PiwUDfsLdgSbPkxBCjHh+YEHyoAe9tuac64HazoR/YO//NjVMnKcQeollZkjUfgu8r+hTGsNxw8zizAFdQNk+RPbx0lJJWVU/XY52joi4CnFTvNViqh04hIQHQblaNSOxbJtiHYZLtf41U1eQ+UyIctTUK+SBdd1UlUx0bOOPb8uvQMY5b3H5obcRsGwXYzCy0/XW3VBq/27X1/p8Upzko975dXDqSu5eOyvhe4NpAvtywj5VC0qeWSzt5LF20uMy2JP6uSs5sl7TphAqg7HHmaK14Hy+7jc+7tLTsxbvjpURHiOm3csfD0Ua8woifOGEFYTdK6/EueyAaVIrjynp1GXHP1dllRd6/yVhIfJ1bOWSPvkR6JoFD4TPnOIPJgthRdH1gfd/hpTPBsX32Ywe0NJeLTD2RqoP9AiXgGKIMv5r4bdh2dc3A6CUdFR2W171wt9E1oXPaG/VwF+ppUnPyA8D/BT/c+yNV1iac9ilZphtHK3npai8hyN/xC4yiUcZBGbVkj/H0GDH1gJuJaTY9adtSU7PKWfHM5+VpDjYxrysihnX9n/bCP3ovUPeU5sQPN/cvKNMJppObS/H6vILwUwhKWwv2ExaQ4DQ7nReD9WjEwlA3+PdGhAXfA4BpV96biQ/9ulSWlsPZ5bdQU8IdGdvX7sOzawFFdo/c=
  - secure: VYN+Aff7p3353brqiAjpFD9PC8ZB6xSb2vD6NLzpnNOQhjIZOrIdcUvaSwhdNU6IKIMb7QDOr4xisk1T4pSaPBvzyFUAHr0TMT3JHDSqqR27UzBQlqDRPuT7A4hWGJ+iXCyeyX3KWb0KTs5gB9UX2+yoHIFwEDJngJd+LwEWt1pQLCZ+Fj7SzCoUkIBTrrKiBxH4wM1bQ7KE2XnEVIdfDOGjpmUoO35HjXreMlKjSNp3wV+rCy7RuIX5qleqiX99G4PxCdMn34Sqj2IUF+SLljps3c65d2VXeV0ivueL/m52KkpPculOOVcK//mtUCWzpI5KBsUzvBFZU8vaE9f7V3bnOFWByJOVzBpLnrfl7hAYHyw+34R0XMtQxsnoHMJ1NwJExlaeNyDhF84JCBcarJaoN+7nNriA+7pIrWCnAjLKTBzAlpNPkKLG9BUghcqkpjVc3/GFE74SiQuftmUcOEqQqCE4r2I/W4y51hrMzXtOBpjgvWs11rXeUjAo4p4ubom45cROJnJQ/hHvrb5GPQ62wj6TFH8h9lXc8epIb0CtrbJUohh9VLt+5Q1aIn7DRD2Y/Q20Vk/3n4Gp4Hf1ZU4qmTBlLEHLFDrgtzbIOSl5D0Z9Wq73PU37pL3qZYpcRx4jmA81E4vW0Bclau1jguzmxvZbnejY7gNKMQhjNuo=
  - secure: z+YHb8K/7onE5eqlnmgSflsBzK+yZ2ryfy/qqwaZdNu+fYrj64+lhwTXu5CBQ5bZU4HvlNa+UAicvgBRKibJ21azwi/zCgHtDVdbs0yBWULjOM3Ny7qxutjFcYYM8WNH26kASyx/432fpQ5fza/f0FJSv6qMOnTNr4KLb1L0H4klN+Ao2TMVXk3z6UiOGo9O0A68sAAx6l0hw6subypKWZHfDutsc1vHiGRGh95ZJN/rplOSr57br7+/vnd/PVWAto51pueuwjULphW4zbXFnVeY9OXlflETiM3TqrfNl1GbRI0J/BXiyTYutowpyDMgSUbCNK3UQugp+3Ioai5RtDDMaP9e7lZZQnOEbfB+oSWZkysg6K5+p/oAh9XQAbq5f5dsuuJfrWVtnIXltRUg+vcuIGgk3TXQYMq6Z4oocwx6Kv/hMcBplSwJSmo9iZXHKTb3UHE8yqWNI5+0KYC/s18vFJGV1HdH10E2nowtNLHzC5vIqWwlSgOLVjH6FSJsK34ans14qJAXLfsp/NUTFukEZxMuY86tdPG9t5T9w0N0k4pU8pvSjbktQhTUgPSUQ25AmYsZUKGpV1afEOmI/KCueTRb73Ze7X2XL0GJd/GRSAH7anTN56+Sk4R0gRgVVme9+rMwcliN1ksNJR01Ft7nFCeN1Y01yZtcVJ4DBes=
  - secure: hbNcA2RL5+fzcwKtghO0g9CnBSd9sfyO+12x0My0EFMyzglzm72zErCYHel5+J1XZ7p0SCX504VD+3hUqphjZkibI2QpB3ZDPrGgjw/Ol3L2Kr0S2gKhfiSfKVhsLKX7DrX/GXAGEfywN+zf0GdNM1AVAcUt4PmX2dmtWxWSDRZnA710IwuKCTrJEMx+KWJfAUhkt+ShuULCJtEL/rNgDdHNWSYSxdxNfe7a/HR5dioqik+PlkWFPrVeitMg1nbKeb51fdmVokxVlWdzMvkgoxwhM+zP4nEodo1Bm7vgcpj1rnI3N58lCrpxX4E7zzUwEUJZMAvQO5kE7RlJbijSVIqFRXlHUV+kjTsdSOB0q3xqY223YsWF5UYnFNHGFDsD21+lrLddiX/szfGz4409yI2Po3Zy/wfPQ44uY57dc2/SXkYzyUvwmIBJvEJViXHpxC8q6YJFcsU8st1JkgSX2GZas4HCcvKTRSUawQE5nf3I8Fei7fROMkUtg2UiSLMLepN7RNmQI8M/Vo7J7rin9W6f+cF2LBV7wrbwoP98JNDOT9qkPUi+XYZrETPnu/02xo0ydxDAx++ZMxH5D9sPWJAI5Kfk2itoOaVP2nft6Zz+ZFeafz6CLVqTftSnqcX9gFin8bT79dg6tS20O0Be2/yG5jGAf3v75sWPpR7w8vI=
before_install:
- gem install travis -v 1.8.5 --no-rdoc --no-ri
- sudo curl -k -o /usr/local/bin/ecs-cli https://s3.amazonaws.com/amazon-ecs-cli/ecs-cli-linux-amd64-latest
- sudo chmod +x /usr/local/bin/ecs-cli
- export BUILD_NAME=gohelpfund-$TRAVIS_BRANCH-$(date -u "+%Y%m%d%H%M%S")-$TRAVIS_BUILD_NUMBER
- export CONTAINER_IP=52.29.201.15
- export PLATFORM_TEST_NAME="gohelpfund-platform-tests"
script:
- sh travis_scripts/tag_build.sh
- sh travis_scripts/build_services.sh
- sh travis_scripts/deploy_to_docker_hub.sh
- sh travis_scripts/deploy_to_amazon_ecs.sh
