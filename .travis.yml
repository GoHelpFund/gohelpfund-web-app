language: node_js
node_js:
- '8'
sudo: required
services:
- docker
notifications:
  on_success: always
  on_failure: always
  email:
  - daniel.tirzuman@gohelpfund.com
branches:
  only:
  - develop
env:
  global:
   # DOCKER_USERNAME
   - secure: hhVOlHN2Mm1dx2wQW0t8j7FmJcwRwDjysLa8mgmQ3o/6OSvZFEI/kBlLTs3KuB+ZDDqaQ6WS01HVf061HF1yqlLDeCSz5XRbTUeWybtYaMVO6ZZtscV7sBaDkljWCcvsBsKE56QRkdZmkOvUDlOoOtK1u1oBtmVQhPhLHqeUKGzyXnkRRqpVRbJx2HT2mDQnxxaHY35dO9z9ApGGNaQj6BHYRKIwOYVVVZxQBUXoKz9khLMTz6OSOiViv9JloWI5ELepW7GNRmAWg6uy+xq/60OUYtIyg3i7CREDf5yhUJ9BR01OhD+RMfvJFb8dcnRFfC7KcjIphryYk81xXIVvCVSmVuCaQy1Mlc2uNlC/DClmywc451F4NJF4AkooiPQ7pqeTrlR/7o6CKwqHrBrGFtiCn4B5w3y5NOLirLPlFcBpk0reTe3PcbAq1v/JJmEVS09V/0lau8yKxKalPt6j2GA3b8Sb/jFOwrsweQFQ7T/dT3nx61pXnBYefTQ7tPX+SNAZUK11flzZ5QnZBM4DdQSGNIo1AjRxvTysIeNRQPmMzpGX+yBorTNRz2UNj2s+Do5x4mwf+fYn+QprdQrKFoilT9+5Nsjle/uivn+Ue21i4lPR527VFI1bD9C0+l8FV9zn7K1H2bj+2GzuFTIHgsKxb7Fi+PIJ1DJvwccNEC0=
   # DOCKER_PASSWORD
   - secure: JRHIDZhajmFHLfrGEfeb+sIs9pIaTwMFrZhnMrVjvN5d1/UII7rYdGIh8c0rwDWazutCfAwZZZdyEQccUMVRzwKKSJxhxUuv+94PqBGJwid8Cbf/Qoz2bmhTJy4oPSdFVjZ5ZDoCBGwfVmkKcxsEpwc9lKpAagiaH1wDqh6HJgN43+Wryd0HzpBBopDc/VaV93SRTIVoyWZy3AYrGtEVvPO9U7eCjCn1mi12RsUzpwuXaTZNpTYcHZbO50Sh8kY0lEY5WFrbaTB3sBK1m7pdLpK6/QF8mfzfRDQSW6zIUVaay3JiXF+YQM4lgLENjmsWRlnOXyQB5IPPw972FSB7watBg3KI+zuq1nbns/3DzX7swQnhJvv0KE/pPRzMn6FSJTUs33wQ/Y+U29Wahr+wiZQPmgSaFRa+sL2WU3vBumf/WUNkmslTSPDqj57VdCrqAO5IkIwz1EzkCFaXMH4klhhESzPpyBL3cn8fu1Pr7fJEKRWGkttcaH05dW+LCIik5akpoOLlCQJP1gaUIJUzDszIh8f6nwY55NQ7PTXoqo7qnylqCCyydzzOhUBCOiq8nXDYykCGac5ZQqO5FKMTUgG4lg9ljaLxf7vzHttF0ghH5rOwh9g+ZDK3mDoLSFXzXJ45YQaCtikLdWBOYUyNHaG05Lejz53H+NP76SnsHps=
   # AWS_ACCESS_KEY
   - secure: hAHQViCRHNkqKySjfmz+55Vsks3ov6ieOIBLDyQbC3CcZw+eF0sgb1gyVxBksWsLmsNXpsLL96xwSfDRUWT7vx01GtKGHVNtIBq2JwVPar8x6YlLTq3mLdIsW6QxJr0LwpQpHr2rwp4CPbvDL0BY7gv38g4VZbPKHmEA1O1puI7GCcSXDCcGOXLlelGkG5wN6gHRLV8duNt4WdtyV/l8PV00fJ4wftD//eZ/xDrkNfxTUvB6tqe2veQHotiYx3pjRho69FN7lsUwe/Qt7Sv8e7jOtSLjWS48mAfBHqB/8OhkyD6JJhG1fKNSMrwuYpUvMSo7Cx6rzmOLnz+Rz2j18CPnkmkrc5hxhYZWiD7zHNl72Tn7RVaoCrej866Rwqs+3wMiaWcM9eJnlOaLX5br+AqiGO09j+Wk5FJpN53EDQarVzAJmoHbBSQpk0or9nRkaQOWApdzsoIApSSYgbAkW5XmHUO/jCegjPESWzM4kWKgy4pl8SENexrkPDq7AkxIDEf0BoUyS3iMr0PNXFohebS2F+2E+PTX5wik9tEoCnDbAm8PDEJhAW6XJrnVT8r6HvMAK0XPmK3ot6BTy6eyAX5wF/lgo7vQuepPj7aR4RZ/MCRz8R2sI+Tvmk+9S2oS//KAd0O350EjLxkHLDhbDZxzn89LdSdktJ+jJnAaaUw=
   # AWS_SECRET_KEY
   - secure: kHy0VdMdq2ez0VnuOjFxpg1Vh6SPkszGu57yI6F/zgaQxjeL6CQd2gV3qg18foQ84bG5L5DcI7KHMv2dLdYIDOusEebljX/yALFiD1c2hjHnRc2FlNIBfR8mRL/ax1iaPeEBhTuEVu8efZ3+yJGOHX0WgJyc98dHFUVYRR87cGNIqnkoGakDyAWidULXIcyzvrAYKZVjYz/+4NebNiyObPY8P8tYwcDhMP/A9i4LusjjYoprCllvfJrqai5yi+bOdG0Qbnm8OfvqbJVQFHTRcIrfaosei1/xhK1TFr7Z2zgzYMDaw9pWRcOWmhk7UPXbBC2vnWSHEM1ApKUhJ+PrhbzRiTIVsXk2J60VkDpuwoMm3klo8/rhlGuUqy62wWgq9WWERuBaM/WCEnz2YmeC8ysQsi/0wYgJKMGgCdYK3f5Akk7yGXc7+ex+nBTCVeBNu0C+4fGDLIqXTThdQDDDZ6WD6Fhy6EQwicUM0Yzzjs5ADxY02s/gb8olnlXJd83DUOM9z9QTDhBs+wufBVn2lYKAbV4NHEGe6cX0Zb8N61qP5PqQ45nKG6KCDAGcM6XbIjfXd02rhGaKNcL97RR3HTf72dw6pAZtQ5b9+kqTiFZDOBDu7Cc1wQ7jIEgiFf2nNdIsKS8pQqccwMFfB8hcug9OWAM78MEuBGz2g2Sz5rU=
   # GITHUB_TOKEN
   - secure: 3Bf+cg17fPKLUPKzPs4i50S/M0uhDyWhrHNNfTVbF5iJJWo28jWDAJQc64KcuWhsaPVHvfaabhkMc8JRnp6wjjLv6OalgXfxdLQSvoM2elsqVEs3LK9/L9Jr3MsDAfTosFiPxOmmKN8bAXJ0T5Xo0/dz3l4/jg/UwzSxTqEUCnL7BJcr9Edsa3fPqI3tnNqTeF/9Ux8a3MPTJh7nNcmIjNxnhMSeSPF6HTbqXTHoH7DURfMfG7yZQqkXD+DmG9sgEmfkU7l0EAiQqc+nopr+4eIhTwNsSNEGL9YSn2mcYYkPEAOf8Ja19xE+cKMGQ+AS/JZ+W4EKzKjBOUHvzP0cTpvhCNFtUbIoqcTOEmhuFZp3RTs9psoU31+6d3VBti9Z+aKAGRNdS0AWcN50niSx795DEE8a+X7cF4+rE4XTgFEx7an10xv7kmlNLGunRGn+IttiIRASVFfjvVd+qJXUX6MffZ2v8eKM5yC+BENQ77oqDikNEattHS8sdqGn+0+TbuU2He/3pIclEdOAeKwJMYf5xBv/NM8YLU7seTZ2ZraIU83Y1oJOmXmWQ2lXcvLzFLYucMGht3UFFD/wMBQKwuMLqzKZM0PTlqzlLdn+9YHuVbY8B5ei97B82juwPdC0BBSLRo9MYYeEXrMMBerQI6NuT79CVLIHrb2f1ZJcwHg=
   # HTTPS_OPENSSL_KEY
   - secure: 4PwcgVTh7P20qaKARxBbtYfoMPtRfftk6o+YQsPs4dipSugqfrqju+HsG2kpqijmBqoIOvi+4OvMX088KwVwaA5UFA5dX0OWygTame+ZkNiuyesR0YKJxZYSoPM+xpIithSI8Bu/in82mFotq8fFbubJU9Pf01WLkUjGCAW7QF6J9C3GM7KU6NLYQNXPvMNeMkyiRnwx02LA20mB8rjZF96I/eplRw/XP10BuA17Q9AoXl9ue5cJY6cNqH1b9ABz1eIWLhllqq6BcjLXcIp7sXvRXvsR3yqiIxA61Ey2bYXUfc4q2X0XeGFbjXxjqxghK/wTMlOjsb8vpUbVOk6rU1Iu3yUElTkV0m6bkWsaFd7yWJZBgHJAXj7Vwuq4cvnpKrnAMO6Dz8ZmfTFVDMn+4NUW/c2ZVJ+A6KGFXU0B8rv47bZ+RZnK2W4d5lo3v9HGis/UrOR86hpEdk1wOfB4/i1N+PEmqGQQLkuMfWbZflvyEOXy2JFN5AVKqvYE7TYlkxyvo1fa3iI911iaHHEs6PNUdFZoBgy7bAkha2tbERDEBRGr6DlxtccjsN6d4O9DtjiXZj3rGjm/7PZ85ItWvMdxmrXg7rvt6SKUN1iybMqTXCs/4sniNxIzTJrVVoniltnGnqOOHanWzmWkzIe1Fr6PxwSFucKRQY+aXfiKT2Y=
   # HTTPS_OPENSSL_IV
   - secure: cVyXrW7eCcDt/VY6j+1vUXPcOdW2/YHouyetRycOotAiQaqVN92RYtW3t1VhB1DvqlRBNWjgPM5EQC+BB7W9/aP5eIagedJRmAV8kF0NdUHP3Xry6hkDFt5iNHR29cdrrAXUY0xoHmv80f75DX0g0lcoIWc4okR8ieEXMnex1bFuDlfydQHi/h9UtmgZm/vKvJHXchOKcFNBpWNdKay2opTOm5N0U10LzKA10IwURZr2euTekCcRr+dNCG2EhcXlB2QnKjX2oBfq6zkoR+YkDjznI0nwlaAJSMLoAeqG9Dx7dTGW1ofk8gNLyVofnbIjDldAM2tFFasBfN8suRBUzFxvUoodaogTKYGg974yphPHOyqhw0+Cp3Gy7mdTiwHpvsGuK2S2yZda8qKmK733I33fa5A4NJdFbbiVsEBYMw7hz6hglFU6kCHk8rPJOj+4ITc3JqhXrlmchn5KYEyK4vvdz3XFTmxDq4uSJhM/85WPWwt5PdfRFZ1ZCaxY/AZasZgIRxoik7h0xnqit9QOSFl6h2DOWLHfD0HLR5cRNt5Ewli0o3Vie3FZDqP/EV3ONpxrwGmSuLBb07wXyGdj5j844BshSuz0mZplwV0SOwgTLVmS9zEMJODoAJPoptXqu20j4lV/vn1H3K8kzoA9rAW6U//zJ3BKAYhUfQUtFZg=
before_install:
- gem install travis -v 1.8.5 --no-rdoc --no-ri
- sudo curl -k -o /usr/local/bin/ecs-cli https://s3.amazonaws.com/amazon-ecs-cli/ecs-cli-linux-amd64-latest
- sudo chmod +x /usr/local/bin/ecs-cli
- export BUILD_NAME=gohelpfund-$TRAVIS_BRANCH-$(date -u "+%Y%m%d%H%M%S")-$TRAVIS_BUILD_NUMBER
- export CONTAINER_IP=52.29.201.15
- export PLATFORM_TEST_NAME="gohelpfund-platform-tests"
script:
- sh travis_scripts/tag_build.sh
- sh travis_scripts/build_services.sh
- sh travis_scripts/deploy_to_docker_hub.sh
- sh travis_scripts/deploy_to_amazon_ecs.sh
